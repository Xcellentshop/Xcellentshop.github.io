const openaiApiKey = "SUA_API_KEY_OPENAI"; // Substitua com a chave da API OpenAI
const googleProjectId = "SEU_PROJECT_ID_GOOGLE"; // Substitua com o ID do seu projeto na Google Cloud Platform
const googleApiKey = "SUA_API_KEY_GOOGLE"; // Substitua com a chave da API Speech-to-Text da Google Cloud Platform

function gerarAudio() {
  const text = $("#texto").val();
  if (!text) {
    alert("Digite o texto que você deseja converter em áudio");
    return;
  }

  const gerador = $("#geradorAudio").val();
  if (gerador === "openai") {
    gerarAudioOpenAI(text);
  } else if (gerador === "google") {
    gerarAudioGoogle(text);
  } else {
    console.error("Gerador inválido:", gerador);
  }
}

function gerarAudioOpenAI(text) {
  const url = `https://api.openai.com/v1/engines/davinci/completions`;
  const body = {
    "prompt": `Gerar áudio a partir do texto: ${text}`,
    "temperature": 0.7,
    "max_tokens": 100,
    "n": 1,
    "stream": false,
    "stop": ["\n"]
  };

  $.ajax({
    url: url,
    method: "POST",
    headers: {
      "Authorization": `Bearer ${openaiApiKey}`
    },
    contentType: "application/json",
    data: JSON.stringify(body),
    success: function(response) {
      const audioUrl = response.choices[0].text;
      $("#audioPlayer").attr("src", audioUrl);
      document.getElementById("audioPlayer").play();
    },
    error: function(error) {
      console.error("Erro:", error);
    }
  });
}

function gerarAudioGoogle(text) {
  const url = `https://texttospeech.googleapis.com/v1/texttospeech:synthesize?key=${googleApiKey}`;
  const body = {
    "config": {
      "languageCode": "pt-BR",
      "voice": {
        "name": "pt-BR-Wavenet-A"
      },
      "audioConfig": {
        "audioEncoding": "MP3"
      }
    },
    "input": {
      "text": text
    }
  };

  $.ajax({
    url: url,
    method: "POST",
    contentType: "application/json",
    data: JSON.stringify(body),
    success: function(response) {
      const audioUrl = response.audioContent;
      $("#audioPlayer").attr("src", audioUrl);
      document.getElementById("audioPlayer").play();
    },
    error: function(error) {
      console.error("Erro:", error);
    }
  });
}

$("#gerarAudio").click(gerarAudio);
